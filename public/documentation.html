<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>myFlix</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <style>
        .btn-secondary {
            margin-bottom: 10px;
            width: 100%;
            font-size: 1.25rem;
            text-align: left;
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>Welcome to myFlix Documentation</h1>
        <p>Base URL: <br>
            <code>http://localhost:8080</code> or <br>
            <code>https://my-flix-2a35e956c61d.herokuapp.com/</code></p>
        <p>This documentation provides an overview of the myFlix application, its features, and how to use it.</p>
        <h2>Table of Contents</h2>
        <ul>
            <li><a href="#installation">Installation</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#api-endpoints">API Endpoints</a></li>
            <li><a href="#tech-stack">Tech Stack</a></li>
        </ul>
        <h2 id="installation">Installation</h2>
        <p>In order to use the App on your local machine you need to download the files from GitHub repository and install the necessary
            dependencies by running <code>npm install</code> in the project directory via Terminal.</p>
        <h2 id="features">Features</h2>
        <ul>
            <li>Allow new users to register</li>
            <li>Allow users to login and obtain a JWT token</li>
            <li>Allow users to update their user info (username, password, email, date of birth)</li>
            <li>Allow users to add a movie to their list of favorites</li>
            <li>Allow users to remove a movie from their list of favorites</li>
            <li>Allow existing users to deregister</li>
            <li>Return a list of ALL movies to the user</li>
            <li>Return data (description, genre, director, image URL, whether it’s featured or not) about a
                single movie by title to the user</li>
            <li>Return data about a genre (description) by name/title (e.g., “Thriller”)</li>
            <li>Return data about a director (bio, birth year, death year) by name</li>
        </ul>
        <h2 id="api-endpoints">API Endpoints</h2>
        <ul>
            <li><a href="#login">/login</a></li>
            <li><a href="#POST-users">/users</a></li>
            <li><a href="#PUT-users-username">/users/[username]</a></li>
            <li><a href="#POST-users-favorites">/users/[username]/movies/[movieID]</a></li>
            <li><a href="#GET-movies">/movies</a></li>
            <li><a href="#GET-movies-title">/movies/[title]</a></li>
            <li><a href="#GET-genres-genreName">/movies/genre/[genreName]</a></li>
            <li><a href="#GET-directors-name">/movies/directors/[name]</a></li>
        </ul>
        <h3>Overview table</h3>
        <table id="endpoint-table" class="table table-striped">
            <tr>
                <th scope="col">Endpoint</th>
                <th scope="col">HTTP Method</th>
                <th scope="col">Description</th>
                <th scope="col">Request body data format</th>
                <th scope="col">Response body data format</th>
            </tr>
            <tr>
                <td>/login</td>
                <td>POST</td>
                <td>Login registered user to obtain a JWT token.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr class="table-striped">
                <td>/users</td>
                <td>POST</td>
                <td>Registers a new user with username, password, email, and birthday.</td>
                <td>JSON</td>
                <td>JSON</td>
            </tr>
            <tr>
                <td>/users/:username</td>
                <td>PUT</td>
                <td>Updates an existing user's profile (username, password, email, birthday) by username.</td>
                <td>JSON</td>
                <td>JSON</td>
            </tr>
            <tr class="table-striped">
                <td>/users/:username</td>
                <td>DELETE</td>
                <td>Deletes a user account by username.</td>
                <td>None</td>
                <td>String</td>
            </tr>
            <tr class="table-striped">
                <td>/users/:username/movies/:movieID</td>
                <td>POST</td>
                <td>Adds a movie to a user's list of favorites by username and movie ID.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr>
                <td>/users/:username/movies/:movieID</td>
                <td>DELETE</td>
                <td>Removes a movie from a user's list of favorites by username and movie ID.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr class="table-striped">
                <td>/movies</td>
                <td>GET</td>
                <td>Returns a list of all movies.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr>
                <td>/movies/:title</td>
                <td>GET</td>
                <td>Returns a single movie matching the provided title.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr class="table-striped">
                <td>/movies/genre/:genreName</td>
                <td>GET</td>
                <td>Returns a single genre matching the provided genre name.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
            <tr>
                <td>/movies/directors/:directorName</td>
                <td>GET</td>
                <td>Returns information about a director matching the provided director name.</td>
                <td>None</td>
                <td>JSON</td>
            </tr>
        </table>
        <div class="endpoint" id="login">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#login-card"
                aria-expanded="false" aria-controls="login-card">POST /login</button>
            <div class="collapse" id="login-card">
                <p><strong>Description:</strong>
                    Allows <strong>registered</strong> user to login and obtain a JWT token.
                </p>

                <p><strong>JWT Token:</strong> Not required</p>

                <p><strong>HTTP Method:</strong> <code>POST</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/login</code></p>

                <p><strong>Path Parameters:</strong><code>username</code> (User's username)</p>

                <p><strong>Request Body:</strong> None</p>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                    {
                    
                    "user": {
                    
                        "_id": "6954e79789464f933f8561a5",
                        
                        "username": "testuser2",
                        
                        "password": "qwerty123",
                        
                        "email": "testuser2@example.com",
                        
                        "favoriteMovies": [],
                        
                        "__v": 0
                    
                    },
                    
                    "token":
                    "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJfaWQiOiI2OTU0ZTc5Nzg5NDY0ZjkzM2Y4NTYxYTUiLCJ1c2VybmFtZSI6InRlc3R1c2VyMiIsInBhc3N3b3JkIjoicXdlcnR5MTIzIiwiZW1haWwiOiJ0ZXN0dXNlcjJAZXhhbXBsZS5jb20iLCJmYXZvcml0ZU1vdmllcyI6W10sIl9fdiI6MCwiaWF0IjoxNzY3MTcyMDA5LCJleHAiOjE3Njc3NzY4MDksInN1YiI6InRlc3R1c2VyMiJ9.HkS6kuNtfVhaiBIaJJe9xB4Yg8JF8GdQSib5w0PMUlI"                       
                
                    }</code></pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Something is not right</code> – Received error or user not existing in database</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="POST-users">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#POST-users-card"
                aria-expanded="false" aria-controls="POST-users-card">POST /users</button>
            <div class="collapse" id="POST-users-card">
                <p><strong>Description:</strong><br>
                    Registers a new user.
                </p>

                <p><strong>JWT Token:</strong> Not required</p>

                <p><strong>HTTP Method:</strong> <code>POST</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/users</code></p>

                <p><strong>Path Parameters:</strong> None</p>

                <p><strong>Request Body:</strong> application/json</p>
                <p><strong>Example Request:</strong></p>
                <pre class="endpoint-request"><code>
                {
                    "username": "kate",
                    "password": "password123",
                    "email": "kate@example.com",
                    "birthday": "1985-07-21"
                }</code></pre>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>201 Created</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                {
                    "_id": "60f1c2...",
                    "username": "kate",
                    "password": "password123",
                    "email": "kate@example.com",
                    "birthday": "1985-07-21T00:00:00.000Z",
                    "favoriteMovies": []      
                }</code></pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – Username already exists or required fields missing</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="PUT-users-username">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#PUT-users-username-card"
                aria-expanded="false" aria-controls="PUT-users-username-card">PUT /users/:username</button>
            <div class="collapse" id="PUT-users-username-card">
                <p><strong>Description:</strong><br>
                    Updates an existing user's profile using their current username.
                </p>

                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>PUT</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/users/:username</code></p>

                <p><strong>Path Parameters:</strong> <code>username</code> (current username)</p>

                <p><strong>Request Body:</strong> application/json</p>
                <p><strong>Example Request:</strong></p>
                <pre class="endpoint-request"><code>
                {
                    "username": "johnny",
                    "password": "newPassword!",
                    "email": "johnny@example.com",
                    "birthday": "1990-11-02"
                }</code></pre>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                {
                    "_id": "60f1c2...",
                    "username": "johnny",
                    "password": "newPassword!",
                    "email": "johnny@example.com",
                    "birthday": "1990-11-02T00:00:00.000Z",
                    "favoriteMovies": []      
                }</code></pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – User not found</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="DELETE-users-username">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#DELETE-users-username-card"
                aria-expanded="false" aria-controls="DELETE-users-username-card">DELETE /users/:username</button>
            <div class="collapse" id="DELETE-users-username-card">
                <p><strong>Description:</strong><br>
                    Deletes a user account by username.
                </p>

                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>DELETE</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/users/:username</code></p>

                <p><strong>Path Parameters:</strong> <code>username</code> (User username)</p>

                <p><strong>Request Body:</strong> None</p>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>text/plain</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response">kate was deleted.</pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – User not found</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="POST-users-favorites">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#POST-users-favorites-card"
                aria-expanded="false" aria-controls="POST-users-favorites-card">POST /users/:username/movies/:movieID</button>
            <div class="collapse" id="POST-users-favorites-card">
                <p><strong>Description:</strong><br>
                    Adds a movie to a user's list of favorites using username and movie ID.
                </p>

                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>POST</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/users/:username/movies/:movieID</code></p>

                <p><strong>Path Parameters:</strong>
                    <code>username</code> (User username), <code>movieID</code> (Movie ID)
                </p>

                <p><strong>Request Body:</strong> None</p>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                {
                    "_id": "60f1c2...",
                    "username": "kate",
                    "favoriteMovies": ["64a1b9..."]
                }
                </code></pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>500 Internal Server Error</code> – Failed to update favorites</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="DELETE-users-favorites">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#DELETE-users-favorites-card"
                aria-expanded="false" aria-controls="DELETE-users-favorites-card">DELETE /users/:username/movies/:movieID</button>
            <div class="collapse" id="DELETE-users-favorites-card">
                <p><strong>Description:</strong><br>
                    Removes a movie from a user's list of favorites using username and movie ID.
                </p>

                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>DELETE</code></p>

                <p><strong>URL:</strong> <code>http://localhost:8080/users/:username/movies/:movieID</code></p>

                <p><strong>Path Parameters:</strong>
                    <code>username</code> (User username), <code>movieID</code> (Movie ID)
                </p>

                <p><strong>Request Body:</strong> None</p>

                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>

                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                {
                    "_id": "60f1c2...",
                    "username": "kate",
                    "favoriteMovies": []
                }
                </code></pre>

                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>500 Internal Server Error</code> – Failed to update favorites</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="GET-movies">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#GET-movies-card"
                aria-expanded="false" aria-controls="GET-movies-card">GET /movies</button>
            <div class="collapse" id="GET-movies-card">
                <p><strong>Description:</strong>
                    Returns a list of all movies.
                </p>

                <p><strong>JWT Token:</strong> Required</p>
        
                <p><strong>HTTP Method:</strong> <code>GET</code></p>
        
                <p><strong>URL:</strong> <code>http://localhost:8080/movies</code></p>
        
                <p><strong>Path Parameters:</strong> None</p>
        
                <p><strong>Request Body:</strong> None</p>
        
                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>
        
                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                    [
                        {
                            "title": 'Rubber',
                            "director": {
                                "name": 'Quentin Dupieux',
                                "bio": 'Quentin Dupieux is a French filmmaker and electronic musician known for his surreal and absurdist style. He
                                often incorporates elements of dark humor and unconventional storytelling in his works.',
                                "birthYear": 1974
                            },
                            "writer": 'Quentin Dupieux',
                            "year": 2010,
                            "Genre": 'Horror',
                            "imageUrl": 'https://m.media-amazon.com/images/M/MV5BMTgyMTU1Nzc4MV5BMl5BanBnXkFtZTcwNTIwMzYzNA@@._V1_.jpg',
                            "description": 'A homicidal car tire, discovering it has destructive psionic power, sets its sights on a desert town
                            once a mysterious woman becomes its obsession.'
                        },
                        {
                            "title": 'The Lord of the Rings: The Return of the King',
                            "director": {
                                "name": 'Peter Jackson',
                                "bio": 'Peter Jackson is a New Zealand film director, producer, and screenwriter. He is best known for directing the
                                epic fantasy film trilogy "The Lord of the Rings" and "The Hobbit".',
                                "birthYear": 1961
                            },
                            "writer": 'Fran Walsh, Philippa Boyens, Peter Jackson',
                            "year": 2003,
                            "Genre": 'Fantasy',
                            "imageUrl":
                            'view-source:https://m.media-amazon.com/images/M/MV5BMTZkMjBjNWMtZGI5OC00MGU0LTk4ZTItODg2NWM3NTVmNWQ4XkEyXkFqcGc@._V1_.jpg',
                            "description": 'Gandalf and Aragorn lead the World of Men against Sauron\'s army to draw his gaze from Frodo and Sam as
                            they approach Mount Doom with the One Ring.'           
                        }
                    ]</code></pre>
        
                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>500 Internal Server Error</code> – Server failed to retrieve movies</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="GET-movies-title">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#GET-movies-title-card"
                aria-expanded="false" aria-controls="GET-movies-title-card">GET /movies/:title</button>
            <div class="collapse" id="GET-movies-title-card">
                <p><strong>Description:</strong><br>
                    Returns a single movie matching the provided title.
                </p>

                <p><strong>JWT Token:</strong> Required</p>
        
                <p><strong>HTTP Method:</strong> <code>GET</code></p>
        
                <p><strong>URL:</strong> <code>http://localhost:8080/movies/:title</code></p>
        
                <p><strong>Path Parameters:</strong></p>
                <ul>
                    <li><code>title</code> (string) – The exact title of the movie</li>
                </ul>
        
                <p><strong>Request Body:</strong> None</p>
        
                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>
        
                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                    {
                        "title": 'Fight Club',
                        "director": {
                            "name": 'David Fincher',
                            "bio": 'David Fincher is an American film director known for his dark and stylish films, often exploring themes of psychological thriller and crime.',
                            "birthYear": 1962
                        },
                        "writer": 'Chuck Palahniuk (novel), Jim Uhls (screenplay)',
                        "year": 1999,
                        "Genre": 'Drama',
                        "imageUrl":
                        'https://m.media-amazon.com/images/M/MV5BOTgyOGQ1NDItNGU3Ny00MjU3LTg2YWEtNmEyYjBiMjI1Y2M5XkEyXkFqcGc@._V1_.jpg',
                        "description": 'An insomniac office worker and a devil-may-care soap maker form an underground fight club that evolves
                        into something much, much more.'          
                    },</code></pre>
        
                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – Movie not found</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="GET-genres-genreName">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#GET-movies-genreName-card"
                aria-expanded="false" aria-controls="GET-movies-genreName-card">GET /movies/genre/:genreName</button>
            <div class="collapse" id="GET-movies-genreName-card">
                <p><strong>Description:</strong><br>
                    Returns a single genre matching the provided genre name.
                </p>
        
                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>GET</code></p>
        
                <p><strong>URL:</strong> <code>http://localhost:8080/movies/genre/:genreName</code></p>
        
                <p><strong>Path Parameters:</strong></p>
                <ul>
                    <li><code>genreName</code> (string) – The exact name of the genre</li>
                </ul>
        
                <p><strong>Request Body:</strong> None</p>
        
                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>
        
                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                        {
                            "Genre": 'Horror'
                        },</code></pre>
        
                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – Genre not found</li>
                </ul>
            </div>
        </div>
        <div class="endpoint" id="GET-directors-name">
            <button class="btn btn-secondary" type="button" data-toggle="collapse" data-target="#GET-movies-directors-card"
                aria-expanded="false" aria-controls="GET-movies-directors-card">GET /movies/directors/:directorName</button>
            <div class="collapse" id="GET-movies-directors-card">
                <p><strong>Description:</strong><br>
                    Returns information about a director matching the provided director name.
                </p>
        
                <p><strong>JWT Token:</strong> Required</p>

                <p><strong>HTTP Method:</strong> <code>GET</code></p>
        
                <p><strong>URL:</strong> <code>http://localhost:8080/movies/directors/:directorName</code></p>
        
                <p><strong>Path Parameters:</strong></p>
                <ul>
                    <li><code>directorName</code> (string) – The exact name of the director</li>
                </ul>
        
                <p><strong>Request Body:</strong> None</p>
        
                <p><strong>Success Response:</strong></p>
                <ul>
                    <li><strong>Status Code:</strong> <code>200 OK</code></li>
                    <li><strong>Content-Type:</strong> <code>application/json</code></li>
                </ul>
        
                <p><strong>Example Response:</strong></p>
                <pre class="endpoint-response"><code>
                        {
                            "name": 'Quentin Dupieux',
                            "bio": 'Quentin Dupieux is a French filmmaker and electronic musician known for his surreal and absurdist style. He
                            often incorporates elements of dark humor and unconventional storytelling in his works.',
                            "birthYear": 1974       
                        }</code></pre>
        
                <p><strong>Error Responses:</strong></p>
                <ul>
                    <li><code>400 Bad Request</code> – Director not found</li>
                </ul>
            </div>
        </div>
        <h2 id="tech-stack">Tech Stack</h2>
        <ul>
            <li>Node.js</li>
            <li>REST</li>
            <li>JSON</li>
            <li>MongoDB</li>
            <li>Postman for API testing</li>
            <li>Bootstrap for styling</li>
        </ul>
    </div>

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js"
        integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js"
        integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
        crossorigin="anonymous"></script>
</body>

</html>